CONST { TRANSFORM } = REQUIRE('STREAM');

CONST UPPERCASETRANSFORM = NEW TRANSFORM({
  TRANSFORM(CHUNK, ENCODING, CALLBACK) {
    // CHUYỂN CHUNK SANG CHỮ IN HOA
    CONST UPPERCHUNK = CHUNK.TOSTRING().TOUPPERCASE();
    THIS.PUSH(UPPERCHUNK);
    CALLBACK();
  }
});

// DÙNG VỚI PIPE
CONST FS = REQUIRE('FS');

FS.CREATEREADSTREAM('INPUT.TXT')
  .PIPE(UPPERCASETRANSFORM)
  .PIPE(FS.CREATEWRITESTREAM('OUTPUT-UPPERCASE.TXT'));
